{
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 800,
      "height": 400,
      "title": "Energy Consumption in New South Wales (1987-88 to 2022-23)",
      "params": [
            {
                  "name": "yearStep",
                  "value": "1987-88",
                  "bind": {
                        "input": "select",
                        "options": [
                              "1987-88",
                              "1988-89",
                              "1989-90",
                              "1990-91",
                              "1991-92",
                              "1992-93",
                              "1993-94",
                              "1994-95",
                              "1995-96",
                              "1996-97",
                              "1997-98",
                              "1998-99",
                              "1999-00",
                              "2000-01",
                              "2001-02",
                              "2002-03",
                              "2003-04",
                              "2004-05",
                              "2005-06",
                              "2006-07",
                              "2007-08",
                              "2008-09",
                              "2009-10",
                              "2010-11",
                              "2011-12",
                              "2012-13",
                              "2013-14",
                              "2014-15",
                              "2015-16",
                              "2016-17",
                              "2017-18",
                              "2018-19",
                              "2019-20",
                              "2020-21",
                              "2021-22",
                              "2022-23"
                        ],
                        "name": "Year: "
                  }
            }
      ],
      "data": {
            "url": "js/STE_2021_AUST_GDA2020.topojson",
            "format": {
                  "type": "topojson",
                  "feature": "STE_2021_AUST_GDA2020"
            }
      },
      "projection": {
            "type": "mercator",
            "center": [
                  133.7751,
                  -25.2744
            ],
            "scale": 1000
      },
      "transform": [
            {
                  "lookup": "properties.STE_CODE21",
                  "from": {
                        "data": {
                              "url": "data/energy_consumption_state.csv",
                              "format": {
                                    "type": "csv"
                              }
                        },
                        "key": "STE_CODE21",
                        "fields": [
                              "GWh",
                              "Year"
                        ]
                  }
            },
            {
                  "filter": "datum.Year == yearStep"
            }
      ],
      "mark": {
            "type": "geoshape",
            "stroke": "white",
            "fill": "lightgray"
      },
      "encoding": {
            "color": {
                  "field": "GWh",
                  "type": "quantitative",
                  "scale": {
                        "scheme": "blues"
                  },
                  "legend": {
                        "title": "Energy Consumption (GWh)"
                  }
            },
            "tooltip": [
                  {
                        "field": "properties.STE_NAME21",
                        "type": "nominal",
                        "title": "State"
                  },
                  {
                        "field": "GWh",
                        "type": "quantitative",
                        "title": "Energy Consumption (GWh)"
                  },
                  {
                        "field": "Year",
                        "type": "ordinal",
                        "title": "Year"
                  }
            ]
      }
}